<html ng-app = "finneas_stockholm">
    <head>
        <title>Finneas Stockholm</title>
        <link rel="stylesheet" type = "text/css" href="styles.css">
        <script src = "angular.min.js"></script> 
        <script src = "logger_controller.js"></script>
        <script src = "market_controller.js"></script>
        <script src = "main_module.js"></script>
        <script src = "controller_module.js"></script>
        <script src = "component_module.js"></script>
        <script src = "factory_module.js"></script>
    </head>

    <body>

        <table>
            <tr><td>
                    <input type = "text" value = "username" disabled>
                    <input type = "button" value = "Login" disabled>
                    <input type = button value = "Logout" disabled>
            </td></tr>
        </table><br><br>


        <div id = "portfolio-app" class = "container" 
                ng-cloak ng-controller = 'market_controller as market'>
            <div class = "title">Finneas Stockholm: Portfolio Manager</div>
            <table>
                <tr>
                    <div class = "manager"> Manage Portfolio
                    <div class = "manager-grid">   
                        <div class = "manager-grid-item">
                            <select ng-model = 'market.selection'>
                                <option ng-if ="!market.portfolio.tickers.includes(ticker)"
                                         ng-repeat = "ticker in market.tickers">{{ticker}}</option>
                            </select>
                            <input id = "add-enabled" type = "button" value = "Add Stock"
                                ng-click = "market.add()" ng-if="market.selection" >
                            <input type = "button" value ="Add Stock" disabled
                                ng-if = "!market.selection">
                            <input type = "button" value = "Clear Search"
                                ng-if = "market.clearable" ng-click = "market.clear()">
                            <input type = "button" value = "Clear Search" disabled
                                ng-if = "!market.clearable">
                        </div>
                    </div> 
                </tr>
                <tr><div class = "stock-grid" ng-if = "market.portfolio.tickers.length === market.add_clicks && market.stored">
                    <div class = "stock-grid-item" ng-repeat = "holding in market.portfolio.tickers">
                        {{holding}} Holding
                        <stock-tab ticker = "holding" price = "market.getStoredPrice(holding)"></stock-tab>
                    </div>
                </div></tr>
            </table>
        </div>

    </body>

</html>